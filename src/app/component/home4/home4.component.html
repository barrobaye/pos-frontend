<div  *ngIf="chooseCh;else afterChoose" style="background-image: url('assets/feane/images/arF.png');background-position: center;min-height: 100vh;height: auto;overflow: hidden">
  <div class="container">
    <div class="row">
      <div class="col text-center mt-5">
        <img src="assets/feane/images/Art.png" alt="" class="img-fluid" width="200" height="200">
      </div>
      <div class="w-100 mt-5"></div>
      <div class="col" >
        <h1 style="font-family: Arial, sans-serif;font-size: 40px;font-weight: bold;" class="text-center">Où souhaitez-vous manger ?</h1>
      </div>
      <div class="w-100 mt-3"></div>
      <div class="col text-center">
        <div class="options">
          <button class="option"  (click)="selectOption('surPlace')" >
            <i class="fas fa-utensils">
            </i>
            <h4 style="font-size: 40px">
              Sur place
            </h4>
          </button>
          <button class="option"  (click)="selectOption('aEmporter')" >
            <i class="fas fa-shopping-bag">
            </i>
            <h4 style="font-size: 40px">
              À emporter
            </h4>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #afterChoose style="margin: 0;padding: 0">
  <div class="d-flex flex-column flex-root" *ngIf="totalP==0;else exisTot"  style="background-image: url('assets/feane/images/arF.png'); background-position: center; background-size: cover; min-height: 100vh;height: auto;overflow: hidden">
    <div class="page d-flex flex-row flex-column-fluid">
      <div id="kt_aside" class="aside" data-kt-drawer="true" data-kt-drawer-name="aside" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="auto" data-kt-drawer-direction="start" data-kt-drawer-toggle="#kt_aside_toggle" style="background-color: whitesmoke">
        <!--begin::Logo-->
        <div class="aside-logo flex-column-auto  pt-lg-20" id="kt_aside_logo">
          <a href="index.html">
            <img alt="Logo" src="assets/feane/images/Art.png" class="h-100px" />
          </a>
        </div>
        <!--end::Logo-->
        <!--begin::Nav-->
        <div class="aside-menu py-lg-10" id="kt_aside_menu"  >
          <!--begin::Aside menu-->
          <div id="kt_aside_menu_wrapper" class="w-100  d-flex" >
            <div id="kt_aside_menu" class="menu menu-column menu-title-gray-600 menu-state-primary menu-state-icon-primary menu-state-bullet-primary menu-icon-gray-500 menu-arrow-gray-500 fw-semibold fs-6 my-auto" data-kt-menu="true">
              <!--begin:Menu item-->
              <div data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-placement="right-start" class="menu-item show here py-2" style="border:  #6c757d" >
                <!--begin:Menu link-->
                <span class="menu-link menu-center" (click)="resetFilter()">
										<span class="menu-icon me-0">
                      <h4>Menu</h4>
										</span>
									</span>
                  <!--end:Menu link-->  
              </div>
              <!--end:Menu item-->

              <div data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-placement="right-start" class="menu-item py-2">
                <ul class="nav nav-pills d-flex justify-content-between nav-pills-custom gap-3 mb-6">
                  <li class="nav-item mb-3 me-0 card1 border" *ngFor="let cat of productCategory" style="border-radius: 1.5rem;">
                    <!--begin::Nav link-->
                    <a class="nav-link nav-link-border-solid btn btn-outline btn-flex flex-column flex-stack pt-9 pb-7 page-bg db"
                       [ngClass]="{'btn-primary': selectedCategory === cat}"
                       (click)="selectCategory(cat)"
                       data-bs-toggle="pill"
                       type="button"
                       style="width: 138px;">
                      <!--begin::Icon-->
                      <div class="nav-icon">
                        <img src="{{ cat.imgUrl }}" class="w-50px" alt="{{ cat.categoryName }}" />
                      </div>
                      <div>
                        <span class="text-gray-800 fw-bold fs-2 d-block">{{ cat.categoryName }}</span>
                        <!-- <span class="text-gray-500 fw-semibold fs-7">14 Salads</span> -->
                      </div>
                      <!--end::Info-->
                    </a>
                    <!--end::Nav link-->
                  </li>
                </ul>
              </div>
              <!--end:Menu item-->
            </div>
          </div>
          <!--end::Aside menu-->
        </div>
      </div>
      <div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper"  >
        <div class="header-mobile py-3">
          <!--begin::Container-->
          <div class="container d-flex flex-stack">
            <!--begin::Mobile logo-->
            <div class="d-flex align-items-center flex-grow-1 flex-lg-grow-0">
              <a href="index.html">
                <img alt="Logo" src="assets/media/logos/demo9.svg" class="h-35px" />
              </a>
            </div>
            <!--end::Mobile logo-->
            <!--begin::Aside toggle-->
            <button class="btn btn-icon btn-active-color-primary me-n4" id="kt_aside_toggle">
              <i class="ki-duotone ki-abstract-14 fs-2x">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
            </button>
            <!--end::Aside toggle-->
          </div>
          <!--end::Container-->
        </div>

        <div id="kt_header" class="header py-6 py-lg-0" data-kt-sticky="true" data-kt-sticky-name="header" data-kt-sticky-offset="{lg: '300px'}"  style="background-image: url('assets/feane/images/arf2.jpg');background-position: center;background-size: cover;">
          <div class="header-container container-xxl">
            <!--begin::Page title-->
            <div class="page-title d-flex flex-column align-items-start justify-content-center flex-wrap me-lg-20 py-3 py-lg-0 me-3">
              <!--begin::Heading-->
              <h1 class="d-flex flex-column text-gray-900 fw-bold my-1" style="font-family: Arial, sans-serif;">
                <span class="text-white fs-1 mx-4">{{ titleHeader }} </span>
              </h1>
              <!--end::Heading-->
            </div>
            <!--end::Page title=-->
            <!--begin::Wrapper-->

            <!--end::Wrapper-->
          </div>
          <!--end::Container-->
          <div class="header-offset"></div>
        </div>
       <div class="row mb-5" style="margin-top: -5%;margin-left: 5%;margin-right: 5%" >
          <div class="col mb-3" *ngFor="let prod of filteredProducts; let i = index;"
               [ngClass]="{'active': selectedProduct === prod}"
               (mouseover)="hoveredProduct = prod"
               (mouseleave)="hoveredProduct = null" (click)="openSuplean(prod.id);">
            <div class="card card-flush flex-row-fluid  mw-100">
              <div class="card-body text-center">
                <img [src]="apiUrlService.getImageUrl(prod.imageUrl)" class="rounded-3 " alt=""  width="200" height="250"/>
                <div class="mb-2">
                  <div class="text-center">
                    <span class="fw-bold text-gray-800 cursor-pointer text-hover-primary fs-3 fs-xl-1">{{ prod.name }}</span>
                    <!--                  <span class="text-gray-500 fw-semibold d-block fs-6 mt-n1 mt-2" *ngIf="prod.active">Disponible</span>-->
                  </div>
                  <span class="text-success text-end fw-bold fs-1">{{ prod.unitPrice }} FCFA</span>
                </div>
              </div>
            </div>
          </div>
       </div>
      </div>
    </div>
  </div>
  <div class="modal" *ngIf="showSuplean">
    <div class="modal-dialog2">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            {{ productSup?.name }} / Prix : {{ subTot }} x {{ quantite }} </h5>
          <!--                      <button class="btn btn-success" (click)="nextProd(productSup.categoryDTO.categoryName);addToCart(productSup,quantite)" *ngIf="totalOrder == 0">Suivant</button>-->
          <button class="btn btn-prim" style="border-radius: 20px;font-size: 20px;padding:10px 32px;"
                  (click)="nextProd(productSup.category.categoryName, quantite, productSup);addToCart(productSup,quantite)"
                  *ngIf="totalOrder == 0;else noTot">Suivant</button>
          <ng-template #noTot>
            <button type="button" class="btn-close" aria-label="Close" (click)="closeSuplean()"></button>
          </ng-template>
        </div>
        <div class="modal-body">
          <div *ngIf="totalOrder > 0;">
            <div class="row">
              <div class="product-grid">
                <div class="product-item" *ngFor="let prod of ortherProd; let i = index">
                  <label class="btn px-4" [ngClass]="{'border border-success': isSelected(prod)}">
                    <input
                      class="btn-check custom-checkbox"
                      type="checkbox"
                      [checked]="isSelected(prod)"
                      (change)="onCheckBoxChange($event, prod)"/>
                    <img width="200" height="200" [src]="prod.imageUrl" alt="Product Image" class="mb-3" />
                    <span class="fw-bold d-block" style="font-size: 20px">{{ prod.unitPrice }}</span>
                  </label>
                  <div *ngIf="i % 4 === 3" class="clearfix"></div> </div>
              </div>
            </div>
          </div>
          
          <div class="row" *ngIf="totalOrder == 0">
            <div class="col-sm">
              <div class="card" style="border: none;">
                <div class="card-body">
                  <div class="d-flex justify-content-center">
                    <img [src]="apiUrlService.getImageUrl(productSup?.imageUrl)" class="w-200px text-center" alt="" />
                  </div>
                  <div class="row justify-content-center">
                    <div class="col text-center mt-2">
                      <h3 class="fw-bold text-gray-800 cursor-pointer text-hover-primary fs-3 fs-xl-1">{{ productSup?.name }}</h3>
                    </div>
                    <div class="w-100"></div>
                    <div class="col-3 mt-3">
                      <h6 class="fw-bold text-gray-500 cursor-pointer text-hover-primary fs-3 fs-xl-1">Quantite </h6>
                    </div>
                    <div class="col-3">
                      <div class="d-flex align-items-center" data-kt-dialer="true" data-kt-dialer-min="1" data-kt-dialer-max="10" data-kt-dialer-step="1" data-kt-dialer-decimals="0">
                        <button type="button" class="btn btn-icon btn-sm btn-light btn-icon-gray-500" data-kt-dialer-control="decrease" (click)="decrementQuantity()" style="border-radius: 50%">
                          <img width="20" height="20" src="https://img.icons8.com/ios-filled/50/minus-math.png" alt="minus-math"/>
                        </button>
                        <input type="text" class="form-control border-0 text-center px-0 fs-3 fw-bold text-gray-800 w-30px" data-kt-dialer-control="input" placeholder="Amount" name="manageBudget" readonly="readonly" [value]="quantite" />
                        <button type="button" class="btn btn-icon btn-sm btn-light btn-icon-gray-500" data-kt-dialer-control="increase" (click)="incrementQuantity()" style="border-radius: 50%">
                          <img width="20" height="20" src="https://img.icons8.com/ios-glyphs/30/plus-math.png" alt="plus-math"/>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-cancel" style="border-radius: 20px;font-size: 20px;padding:10px 32px;" data-bs-dismiss="modal" (click)="closeSuplean()" *ngIf="totalOrder == 0">Close</button>

          <button type="button"
                  class="btn btn-second"
                  (click)="previousProd()" style="border-radius: 20px;font-size: 20px;padding:10px 32px;"
                  *ngIf="currentCategoryIndex > 1">Précédent</button>
          <button type="button" class="btn btn-prim2 button2" style="border-radius: 20px;font-size: 20px;padding:10px 32px;" (click)="finalize()" >Finaliser</button>
          <button type="button"
                  class="btn btn-prim" style="border-radius: 20px;font-size: 20px;padding:10px 32px;"
                  (click)="nextProd(categories[currentCategoryIndex + 1], 0, ortherProd[0])"
                  *ngIf="totalOrder && selectedProducts.length > 0">Suivant</button>
          <button type="button"
              class="btn btn-link2 " style="border-radius: 20px;font-size: 20px;padding:10px 32px;"
              (click)="nextProd(categories[currentCategoryIndex + 1], 0, null)"
              *ngIf="totalOrder && selectedProducts.length === 0">Non merci</button>
        </div>
      </div>
    </div>
  </div>
  <ng-template #exisTot>
    <ng-template #exisTot>
      <body *ngIf="details==false;else noDetails">
      <div style="background-image: url('assets/feane/images/arF.png');background-position: center;min-height: 100vh;height: auto;overflow: hidden;flex: 1;">
        <div class="container">
          <div class="row">
            <div class="col text-center">
              <img src="assets/feane/images/Art.png" alt="" class="img-fluid" width="200" height="200">
            </div>
            <div class="w-100"></div>
  
            <div class="col mx-5">
              <h3 class="fw-bold" style="font-size: 40px">Mon Panier</h3>
            </div>
            <div class="col justify-content-end">
              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn" [class.active]="selectedOption === 'aEmporter'">
                  <input type="radio" name="options" id="option1" autocomplete="off"
                         [checked]="selectedOption === 'aEmporter'"
                         (change)="selectOption('aEmporter')"> À emporter
                </label>
                <label class="btn" [class.active]="selectedOption === 'surPlace'">
                  <input type="radio" name="options" id="option2" autocomplete="off"
                         [checked]="selectedOption === 'surPlace'"
                         (change)="selectOption('surPlace')"> Sur place
                </label>
              </div>
            </div>
            <div class="w-100 mt-4"></div>
            <div class="col mt-2">
              <div *ngFor="let cart of cartItems">
                <div *ngIf="cart.quantity > 0">
                  <div class="d-flex justify-content-center">
                    <img width="300" height="300" [src]="cart.imageUrl" alt="us-dollar-circled--v2" class="mb-3" />
                  </div>
                  <h1 class="fw-bold" style="font-size: 30px;font-family: 'Arial', sans-serif;">{{ cart.name }}</h1>
                  <h6 class="fw-bold" style="font-size: 30px;">{{ cart.unitPrice }} FCFA</h6>
                </div>
              </div>
            </div>
            <div class="w-100"></div>
            <hr>
            <div class="col">
              <div class="container mt-5">
                <div class="row">
                  <div  *ngFor="let cart of cartItems">
                    <div class="col" *ngIf="cart.quantity == 0">
                      <div class="card w-100 mb-3 border-0">
                        <div class="card-body">
                          <div class="row">
                            <div class="col">
                              <div class="d-flex align-items-center">
                                <img [src]="cart.imageUrl" class="w-100px h-100px rounded-3 me-3" alt="Image of {{ cart.name }}">
                                <div class="row">
                                  <div class="col">
                                    <h1 class="fw-bold" style="font-size: 20px;font-family: 'Arial', sans-serif;">{{ cart.name }}</h1>
                                  </div>
                                  <div class="w-100"></div>
                                  <div class="col">
                                    <span *ngFor="let sup1 of cart.surplus">{{ sup1.name }}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col-auto text-end">
                              <h6 class="fw-bold" style="font-size: 15px;">{{ cart.unitPrice }} FCFA</h6>
                              <div class="mt-6">
                                <button type="button" class="btn btn-dark" (click)="remove(cart)">
                                  <i class="fa-solid fa-trash fa-2xl" style="color: #ffffff;"></i>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card text-center" style="margin-top: auto;background-color:#1b84ff;">
        <div class="card-body">
          <div class="container">
            <div class="row d-flex justify-content-center">
              <div class="col">
                <button class="btn btn-custom" (click)="onSubmit1()">
                  <img width="35" height="35" src="https://img.icons8.com/cotton/64/mobile-payment--v3.png" alt="mobile-payment--v3" class="mb-3"/>
                  <p>Mobile Money</p>
                </button>
              </div>
              <div class="col">
                <button class="btn btn-custom" (click)="onSubmit()">
                  <i class="fas fa-dollar-sign"></i>
                  <p class="mt-4">Espece</p>
                </button>
              </div>
              <div class="col align-content-center">
                <h1 class="fw-bold text-white" style="font-size: 30px;font-family: 'Arial', sans-serif;">Total : {{ subTot }} FCFA</h1>
              </div>
            </div>
          </div>
        </div>
      </div>
      </body>
  
    <ng-template #noDetails>
      <app-ticket></app-ticket>
    </ng-template>
 
</ng-template>


